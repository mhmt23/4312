<!DOCTYPE html>
<html>
<head>
    <title>Your Dashboard</title>
</head>
<body>
    <h2>Welcome, {{ user.username }}!</h2>

    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li{% if message.tags %} class="{{ message.tags }}"{% endif %}>{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}

    <a href="{% url 'home' %}">Home</a> |
    <a href="{% url 'profile' %}">Profile</a> |
    <a href="{% url 'create_service' %}">Create New Service</a>

    <hr>

    <h3>Services You Created</h3>
    <ul>
        {% for service in created_services %}
            <li>
                <a href="{% url 'service_detail' service.pk %}">{{ service.title }}</a>
                - Status: {{ service.get_status_display }}
                {% if service.assignee %}
                    (Assigned to: {{ service.assignee.username }})
                {% endif %}

                {% if service.status == 'in_progress' %}
                    <form action="{% url 'complete_service' service.pk %}" method="post" style="display:inline;">
                        {% csrf_token %}
                        <button type="submit">Mark as Completed</button>
                    </form>
                {% endif %}
            </li>
        {% empty %}
            <li>You have not created any services yet.</li>
        {% endfor %}
    </ul>

    <hr>

    <h3>Services You Accepted</h3>
    <ul>
        {% for service in assigned_services %}
            <li>
                <a href="{% url 'service_detail' service.pk %}">{{ service.title }}</a>
                - Status: {{ service.get_status_display }}
                (Creator: {{ service.creator.username }})
            </li>
        {% empty %}
            <li>You have not accepted any services yet.</li>
        {% endfor %}
    </ul>

    <hr>

    <form method="post" action="{% url 'logout' %}">
        {% csrf_token %}
        <button type="submit">Logout</button>
    </form>
</body>
</html>
